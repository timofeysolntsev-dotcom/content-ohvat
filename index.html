<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Контент Охват — продвигаем видео, а не накручиваем просмотры</title>
  <meta name="description" content="Запуск за 24 часа, фиксируем охват от 200 000 в договоре. White‑hat. Прозрачные отчёты и ссылки на все размещения." />
  <link rel="icon" href="/favicon.ico" />
  <meta name="theme-color" content="#00C853" />
  <meta property="og:title" content="Контент Охват — продвигаем видео, а не накручиваем просмотры" />
  <meta property="og:description" content="Запуск за 24 часа, фиксируем охват от 200 000 в договоре. White‑hat. Прозрачные отчёты и ссылки на все размещения." />
  <meta property="og:image" content="https://via.placeholder.com/1200x630.png?text=Kontent+Ohvat" />
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Контент Охват",
    "url": "",
    "sameAs": [],
    "logo": ""
  }
  </script>
  <style>
    :root{--green:#00C853;--green-dark:#049947;--text:#0B0B0B;--bg:#FFFFFF;--muted:#F4F6F8;--radius:16px}
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:16px/1.65 Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    h1,h2,h3{font-family:Manrope,Inter,Arial,sans-serif;letter-spacing:-.02em}
    h1{font-size:46px;line-height:1.08;margin:14px 0}
    h2{font-size:32px;margin:0 0 12px}
    h3{font-size:22px;margin:0 0 8px}
    .container{max-width:1120px;margin:0 auto;padding:0 20px}
    .section{padding:88px 0}
    .lead{font-size:18px;opacity:.95;max-width:760px;margin-bottom:6px}
    .lead-sub{font-size:18px;max-width:760px;color:#374151;margin-top:6px}
    .btn{display:inline-block;background:var(--green);color:#fff;padding:16px 22px;border-radius:14px;font-weight:700;text-decoration:none;transition:.2s;min-height:48px;line-height:1}
    .btn:hover{transform:translateY(-2px);box-shadow:0 12px 30px rgba(0,200,83,.28)}
    .btn-secondary{background:#fff;color:var(--green);border:2px solid var(--green);min-height:48px}
    .panel{background:#fff;border:1px solid #ecf0f3;border-radius:var(--radius);padding:24px}
    .grid{display:grid;gap:22px}
    .cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    .cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
    .muted{color:#6b7280}
    .small{font-size:13px;color:#6b7280}
    .check{padding-left:0;list-style:none;display:grid;gap:10px;margin:10px 0 0}
    .check li::before{content:'✔';color:var(--green);margin-right:10px}
    .note{background:rgba(0,200,83,.08);border:1px dashed var(--green);padding:12px 14px;border-radius:12px}
    .hero{position:relative;overflow:hidden;padding:100px 0 40px;background:radial-gradient(1000px 500px at 15% -10%, rgba(0,200,83,.14), transparent 60%), radial-gradient(800px 500px at 85% 0%, rgba(0,200,83,.10), transparent 60%), linear-gradient(180deg,#fff,#f9fffb)}
    .hero .bar{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px;align-items:center}
    .kpi{display:flex;gap:18px;flex-wrap:wrap;margin-top:22px}
    .kpi .panel{flex:1 1 220px}
    .num{font:800 34px/1 Manrope,Inter,Arial,sans-serif;color:var(--green)}
    .center{text-align:center}
    .sep{height:1px;background:#eef1f4;margin:22px 0}
    .sticky{position:sticky;bottom:14px;z-index:10;display:flex;justify-content:center}
    .sticky .wrap{background:#fff;border:1px solid #e9ecef;border-radius:999px;box-shadow:0 12px 38px rgba(0,0,0,.08);padding:10px 14px;display:flex;gap:12px;align-items:center}
    .hero-miniform{display:grid;gap:12px;grid-template-columns:1.2fr 1fr 1fr auto;background:#fff;border:1px solid #e9ecef;border-radius:14px;padding:10px}
    .hero-miniform input{border:1px solid #e5e7eb;border-radius:10px;padding:12px 12px;min-height:44px}
    .hint{font-size:12px;color:#6b7280;margin-left:8px}
    @media(max-width:980px){.cols-2,.cols-3{grid-template-columns:1fr} .hero-miniform{grid-template-columns:1fr} h1{font-size:38px} h2{font-size:26px} html,body{font:16px/1.7 Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}}
    /* Pricing emphasis */
    .pricing .card{position:relative;background:#fff;border:1.5px solid #ecf0f3;border-radius:16px;padding:24px;transition:.2s}
    .pricing .card:hover{transform:translateY(-2px);box-shadow:0 14px 40px rgba(0,0,0,.08)}
    .pricing .card--featured{border:2px solid var(--green);box-shadow:0 18px 50px rgba(0,200,83,.22);background:linear-gradient(180deg,#ffffff 0%, #f7fffb 100%)}
    @media(min-width:981px){.pricing .card--featured{transform:scale(1.02)}}
    @media(max-width:980px){.pricing .card--featured{order:-1}}
    .pricing h3{font-size:24px;margin-bottom:6px}
    .pricing .badge-outline{display:inline-block;border:1.5px solid var(--green);color:var(--green);border-radius:999px;padding:4px 8px;font-weight:800;font-size:12px;margin:4px 0 8px}
    .pricing .price{font:800 34px/1.15 Manrope,Inter,Arial,sans-serif;margin:10px 0 2px}
    .pricing .per{display:block;font-size:12px;color:#6b7280;margin-top:2px}
    /* Modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:50}
    .modal.open{display:flex}
    .modal .box{background:#fff;border-radius:16px;border:1px solid #e5e7eb;max-width:560px;width:92%;padding:20px;box-shadow:0 20px 60px rgba(0,0,0,.25)}
    .modal .head{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .modal .close{background:transparent;border:0;font-size:22px;cursor:pointer;line-height:1}
    .modal form input,.modal form textarea{width:100%;padding:12px;border:1px solid #e5e7eb;border-radius:12px;min-height:44px}
    .modal .row{display:grid;gap:12px;grid-template-columns:1fr}
    @media(min-width:720px){.modal .row{grid-template-columns:1fr 1fr}}
  /* === Color vignette + animated background === */
    body{position:relative}
    body::before{content:"";position:fixed;inset:0;z-index:-1;pointer-events:none;
      background:
        radial-gradient(60% 70% at -10% -10%, rgba(0,200,83,.20), transparent 60%),
        radial-gradient(60% 70% at 110% 110%, rgba(0,200,83,.20), transparent 60%),
        radial-gradient(40% 40% at 100% 0%, rgba(4,153,71,.12), transparent 60%),
        radial-gradient(40% 40% at 0% 100%, rgba(4,153,71,.12), transparent 60%);
      filter:saturate(1.05)}
    @keyframes bgfloat {
      0%   {transform:translate(-12%, -8%) scale(1)}
      50%  {transform:translate(8%, 6%) scale(1.08)}
      100% {transform:translate(-12%, -8%) scale(1)}
    }
    body::after{content:"";position:fixed;left:50%;top:20%;width:60vmax;height:60vmax;transform:translate(-50%,-50%);z-index:-1;pointer-events:none;
      background:
        radial-gradient(circle at 30% 30%, rgba(0,200,83,.22), transparent 58%),
        radial-gradient(circle at 70% 70%, rgba(4,153,71,.14), transparent 60%);
      filter:blur(42px);opacity:.55;animation:bgfloat 18s ease-in-out infinite alternate}
    @media (prefers-reduced-motion: reduce){ body::after{animation:none} }

    /* усиленная виньетка в hero */
    .hero{background:
      radial-gradient(900px 500px at 0% 0%, rgba(0,200,83,.20), transparent 60%),
      radial-gradient(900px 500px at 100% 100%, rgba(0,200,83,.16), transparent 60%),
      linear-gradient(180deg,#ffffff 0%, #f7fffb 100%)}
  /* === Section accents / inner liveliness === */
    /* gradient underline for section titles */
    h2.center{position:relative}
    h2.center::after{content:"";display:block;width:84px;height:4px;margin:10px auto 0;border-radius:999px;
      background:linear-gradient(90deg, rgba(0,200,83,0), rgba(0,200,83,.6), rgba(0,200,83,0));}

    /* gradient borders + soft glow on key panels */
    #steps .panel, #why .panel, #why-video .panel{
      background:linear-gradient(#fff,#fff) padding-box,
                 linear-gradient(135deg, rgba(0,200,83,.28), rgba(4,153,71,.14)) border-box;
      border:1px solid transparent; box-shadow:0 6px 24px rgba(0,0,0,.05);
      transition:transform .2s ease, box-shadow .2s ease;
    }
    #steps .panel:hover, #why .panel:hover, #why-video .panel:hover{transform:translateY(-3px);box-shadow:0 14px 40px rgba(0,0,0,.10)}

    /* pricing cards get a subtle inner gradient */
    .pricing .card{background:linear-gradient(180deg,#ffffff 0%, #fbfffd 100%)}
    .pricing .card.card--featured{background:linear-gradient(180deg,#ffffff 0%, #f2fff7 100%)}

    /* optional gentle reveal (no motion if reduced) */
    @keyframes revealUp{from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)}}
    .reveal{opacity:0}
    .reveal.in{opacity:1;animation:revealUp .6s ease both}
    @media (prefers-reduced-motion: reduce){ .reveal.in{animation:none;opacity:1} }
  </style>
</head>
<body>
  <!-- Sticky CTA, меняет текст при прокрутке -->
  <div class="sticky" aria-live="polite">
    <div class="wrap small" id="stickyText">Охват от 200 тыс. на 1 видео → <a class="btn" href="#order" aria-label="Прокрутить к заявке" style="margin-left:8px">Получить расчёт</a></div>
  </div>

  <!-- HERO с мини-формой -->
  <section class="hero">
    <div class="container">
      <h1>Мы продвигаем видео, а не накручиваем просмотры</h1>
      <p class="lead">Методика «Контент Охват» публикует один ролик сотни раз в согласованных аккаунтах. Прозрачные цифры, сроки, отчётность и white‑hat подход без риска для бренда.</p>
      <p class="lead-sub">Запуск за 24 часа, фиксируем охват от 200 000 в договоре.</p>

      <div class="kpi">
        <div class="panel"><div class="num">от 200&nbsp;000</div><div class="muted">типовой охват на 1 видео</div></div>
        <div class="panel"><div class="num">24 ч</div><div class="muted">до старта после оплаты</div></div>
        <div class="panel"><div class="num">до 1 000 000</div><div class="muted">масштаб при необходимости</div></div>
      </div>

      <div class="bar">
        <form id="miniForm" class="hero-miniform" autocomplete="on">
          <input name="video" placeholder="Ссылка на видео (Instagram/YouTube/TikTok)" aria-describedby="hintVideo" required>
          <input name="contact" placeholder="Телефон или Telegram" aria-describedby="hintContact" required>
          <input name="reach" placeholder="Желаемый охват (напр. 200 000)" inputmode="numeric" aria-describedby="hintReach">
          <button class="btn" type="submit" aria-label="Получить расчёт из блока Hero">Получить расчёт</button>
        </form>
        <div class="small muted"><span id="hintVideo" class="hint"></span><span id="hintContact" class="hint"></span><span id="hintReach" class="hint"></span><span class="hint">ответ за 1 час</span></div>
      </div>
    </div>
  </section>

  <!-- Шаги сотрудничества -->
  <section class="section" id="steps">
    <div class="container">
      <h2 class="center reveal">Как мы работаем: 3 шага</h2>
      <div class="grid cols-3" style="margin-top:16px">
        <div class="panel">
          <h3>Шаг 1 — созвон и фиксация цели</h3>
          <p>Проводим краткий созвон, уточняем нишу/задачу и <strong>фиксируем желаемый охват до старта</strong> (например, от 200 тыс.). Согласуем темп и план размещений.</p>
        </div>
        <div class="panel">
          <h3>Шаг 2 — массовая публикация</h3>
          <p>Загружаем и публикуем ваше видео <strong>во множестве согласованных аккаунтов</strong>. Первые просмотры начинают приходить сразу после запуска.</p>
        </div>
        <div class="panel">
          <h3>Шаг 3 — отчёт и ссылки</h3>
          <p>По завершении цикла выдаём отчёт с <strong>ссылками на все размещения</strong>, суммарными просмотрами и рекомендациями по масштабированию.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Почему выбирают нас -->
  <section class="section" id="why">
    <div class="container grid cols-3">
      <div class="panel">
        <h3>Фиксируем охват до старта</h3>
        <p><strong>Согласуем диапазон просмотров и закрепляем в договоре.</strong> Это снимает неопределённость, задаёт сроки и помогает планировать KPI.</p>
      </div>
      <div class="panel">
        <h3>Скорость без найма штата</h3>
        <p>Никаких SMM‑отделов и ручного поиска площадок: мы разворачиваем публикации в течение 24 часов и при необходимости масштабируем.</p>
      </div>
      <div class="panel">
        <h3>Отчётность и прозрачность</h3>
        <p>Отчёт включает список аккаунтов, ссылки на публикации, суммарные просмотры и рекомендации по следующему шагу.</p>
      </div>
      <div class="panel">
        <h3>Гарантии результата в договоре</h3>
        <p><strong>Компенсация при недоборе:</strong> докрутка размещений или пропорциональный возврат.</p>
      </div>
      <div class="panel">
        <h3>White‑hat и комплаенс</h3>
        <p>Соблюдаем правила площадок и закон. Тематики и контент согласуем заранее. Бережная частота, без спама.</p>
      </div>
    </div>
  </section>

  <!-- Зачем бизнесу продвигать видео -->
  <section class="section" id="why-video">
    <div class="container">
      <h2 class="center reveal">Зачем бизнесу продвигать видео</h2>
      <div class="grid cols-3" style="margin-top:16px">
        <div class="panel">
          <h3>Быстрый охват и узнаваемость</h3>
          <p>Видео быстрее всего набирает показы и запоминаемость бренда. Идеально для анонсов акций, ивентов и запусков.</p>
        </div>
        <div class="panel">
          <h3>Доверие и соцдоказательство</h3>
          <p>Просмотры, комментарии и репосты усиливают доверие. Виральность даёт органический рост без доп. затрат.</p>
        </div>
        <div class="panel">
          <h3>Топливо для перфоманса</h3>
          <p>Ролики улучшают CTR и снижают стоимость трафика. Плюс материал для ретаргетинга и UGC.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Тарифы -->
  <section class="section" id="pricing">
    <div class="container pricing">
      <h2 class="center reveal">Тарифы</h2>
      <p class="center muted">Выберите конфигурацию размещений. Итоговый диапазон охвата фиксируем в заявке. Если видео снято вирально, просмотры могут быть значительно выше.</p>
      <div class="grid cols-3" style="margin-top:16px">
        <div class="panel card">
          <h3>Тариф 1 — «20×20»</h3>
          <p class="muted">1 видео размещаем в <strong>20 аккаунтах</strong> по <strong>20 раз</strong> каждый</p>
          <ul class="check">
            <li>Средний ожидаемый охват: <strong>≈ 60&nbsp;000</strong> просмотров</li>
            <li>Срок: 3–5 дней</li>
            <li>Отчёт по ссылкам на публикации</li>
            <li><strong>Через 48 часов:</strong> первые 10–20 тыс. просмотров, 10–12 ссылок, черновик отчёта</li>
          </ul>
          <p class="price">15&nbsp;000 ₽</p>
          <span class="per">≈ 0,25 ₽ за просмотр</span>
        </div>
        <div class="panel card card--featured">
          <h3>Тариф 2 — «50×20»</h3>
          <span class="badge-outline">Лучшее соотношение цены и охвата</span>
          <p class="muted">1 видео размещаем в <strong>50 аккаунтах</strong> по <strong>20 раз</strong> каждый</p>
          <ul class="check">
            <li>Средний ожидаемый охват: <strong>≈ 160&nbsp;000</strong> просмотров</li>
            <li>Срок: 5–7 дней</li>
            <li>Подбор лучших аккаунтов по результатам</li>
            <li><strong>Через 48 часов:</strong> 25–45 тыс. просмотров, 12–15 ссылок, сводка по динамике</li>
          </ul>
          <p class="price">25&nbsp;000 ₽</p>
          <span class="per">≈ 0,15 ₽ за просмотр</span>
        </div>
        <div class="panel card">
          <h3>Тариф 3 — «Заказ просмотров»</h3>
          <p class="muted">Вы сообщаете желаемое количество просмотров — мы делаем кастомное решение и присылаем расчёт стоимости.</p>
          <ul class="check">
            <li>Подходит для объёмов <strong>от 500&nbsp;000 просмотров</strong></li>
            <li>Индивидуальный план размещений</li>
            <li>Сроки и бюджет согласуются</li>
            <li><strong>Через 48 часов:</strong> предварительный медиаплан и диапазон охвата</li>
          </ul>
          <p class="price">Стоимость рассчитает менеджер</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Заказ -->
  <section class="section" id="order">
    <div class="container">
      <h2 class="center">Готовы запустить? Получите расчёт сегодня</h2>
      <p class="center muted">Укажите ссылку на видео, желаемый охват и контакт — пришлём сроки по дням и список площадок.</p>
      <form id="leadForm" class="panel" style="max-width:860px;margin:16px auto 0">
        <div class="grid cols-2">
          <div>
            <label for="name">Ваше имя</label>
            <input id="name" required name="name" placeholder="Иван Иванов" aria-describedby="dName" style="width:100%;padding:14px 12px;border:1px solid #e5e7eb;border-radius:12px;min-height:44px" />
            <div id="dName" class="small muted">Как к вам обращаться</div>
          </div>
          <div>
            <label for="contact">Телефон / Telegram</label>
            <input id="contact" required name="contact" placeholder="@username или +7..." aria-describedby="dContact" style="width:100%;padding:14px 12px;border:1px solid #e5e7eb;border-radius:12px;min-height:44px" />
            <div id="dContact" class="small muted">Куда прислать расчёт</div>
          </div>
          <div>
            <label for="fVideo">Ссылка на видео</label>
            <input name="video" id="fVideo" placeholder="https://..." aria-describedby="dVideo" style="width:100%;padding:14px 12px;border:1px solid #e5e7eb;border-radius:12px;min-height:44px" />
            <div id="dVideo" class="small muted">Instagram/TikTok/YouTube</div>
          </div>
          <div>
            <label for="fReach">Желаемый охват</label>
            <input name="reach" id="fReach" placeholder="например, 200000" inputmode="numeric" aria-describedby="dReach" style="width:100%;padding:14px 12px;border:1px solid #e5e7eb;border-radius:12px;min-height:44px" />
            <div id="dReach" class="small muted">Можно ориентировочно</div>
          </div>
        </div>
        <div style="margin-top:12px">
          <label for="comment">Комментарий</label>
          <textarea id="comment" name="comment" placeholder="Ниша, сроки, ожидания…" style="width:100%;min-height:110px;padding:14px 12px;border:1px solid #e5e7eb;border-radius:12px"></textarea>
        </div>
        <div style="display:flex;align-items:center;gap:10px;margin-top:14px">
          <input id="policy" type="checkbox" required />
          <label for="policy" class="small">Соглашаюсь на обработку персональных данных</label>
        </div>
        <div style="margin-top:16px;display:flex;gap:12px;flex-wrap:wrap">
          <button class="btn" type="submit" aria-label="Отправить заявку">Получить услугу</button>
          <a class="btn btn-secondary" href="https://t.me/" target="_blank" aria-label="Открыть Telegram">В Telegram</a>
        </div>
        <p class="small" style="margin-top:10px">Отправляя форму, вы подтверждаете согласие с условиями коммуникации. Спама не будет.</p>
      </form>
    </div>
  </section>

  <!-- Exit‑intent Modal -->
  <div class="modal" id="exitModal" aria-hidden="true" role="dialog" aria-label="Получить расчёт за 1 час">
    <div class="box">
      <div class="head">
        <h3 style="margin:0">Уйдёте без расчёта? Пришлём за 1 час</h3>
        <button class="close" type="button" id="exitClose" aria-label="Закрыть">×</button>
      </div>
      <p class="small muted" style="margin:6px 0 12px">Оставьте контакт — пришлём расчёт за 1 час. Без спама.</p>
      <form id="exitForm">
        <div class="row">
          <input name="contact" placeholder="Телефон или Telegram" required />
          <input name="video" placeholder="Ссылка на видео (необязательно)" />
        </div>
        <div style="margin-top:12px"><textarea name="comment" placeholder="Ниша/ожидания (опционально)"></textarea></div>
        <div style="display:flex;align-items:center;gap:10px;margin-top:12px">
          <input id="exitPolicy" type="checkbox" required />
          <label for="exitPolicy" class="small">Соглашаюсь на обработку персональных данных</label>
        </div>
        <div style="margin-top:14px;display:flex;gap:12px;flex-wrap:wrap">
          <button class="btn" type="submit" aria-label="Отправить exit-заявку">Получить расчёт</button>
          <button class="btn btn-secondary" type="button" id="exitGoOrder" aria-label="Перейти к полной форме">Заполнить полную форму</button>
        </div>
      </form>
    </div>
  </div>

  <footer class="section" style="padding:36px 0;border-top:1px solid #eef1f4">
    <div class="container" style="display:flex;justify-content:space-between;align-items:center;gap:14px;flex-wrap:wrap">
      <div style="font-weight:800;color:var(--green)">Контент Охват</div>
      <div class="small" style="display:flex;gap:14px;flex-wrap:wrap;align-items:center">
        <a href="#privacy" class="small" aria-label="Политика конфиденциальности">Политика конфиденциальности</a>
        <span>© 2025 • White‑hat методика • Запуск за 24 часа</span>
      </div>
    </div>
  </footer>

  <script>
    // Sticky-бар: меняем текст после определённой прокрутки
    const stickyText = document.getElementById('stickyText');
    window.addEventListener('scroll',()=>{
      const y = window.scrollY || document.documentElement.scrollTop;
      stickyText.innerHTML = (y > 600)
        ? "Запуск за 24 часа → <a class=\"btn\" href=\"#order\" aria-label=\"Прокрутить к заявке\" style=\"margin-left:8px\">Получить расчёт</a>"
        : "Охват от 200 тыс. на 1 видео → <a class=\"btn\" href=\"#order\" aria-label=\"Прокрутить к заявке\" style=\"margin-left:8px\">Получить расчёт</a>";
    });

    // Мини-форма переносит данные в основную и скроллит к заказу
    const fVideo = document.getElementById('fVideo');
    const fReach = document.getElementById('fReach');
    const miniForm = document.getElementById('miniForm');
    if(miniForm){ miniForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const d = Object.fromEntries(new FormData(miniForm).entries());
      if(d.video) fVideo.value = d.video;
      if(d.contact) document.querySelector('#leadForm [name=\'contact\']').value = d.contact;
      if(d.reach) fReach.value = d.reach;
      document.getElementById('order').scrollIntoView({behavior:'smooth'});
      console.log('event: hero_submit');
    }); }

    // ==== Настройки интеграции ====
    // ВСТАВЬТЕ сюда ваш входящий вебхук Bitrix24 вида:
    // https://ВАШ_ПОРТАЛ.bitrix24.ru/rest/ID/КЛЮЧ/crm.lead.add.json
    const BITRIX_WEBHOOK = ""; // ← подставьте ваш URL
    // (Необязательно) Промежуточный вебхук Make/Pipedream, если у Bitrix возникнет CORS
    const FALLBACK_WEBHOOK = ""; // ← опционально

    async function sendToWebhook(url, payload){
      const res = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload),
      });
      if(!res.ok) throw new Error('HTTP '+res.status);
      return res.json().catch(()=>({ok:true}));
    }

    // UTM‑метки / источник трафика
    function parseUTM(){
      const p = new URLSearchParams(location.search);
      const utm = {
        utm_source: p.get('utm_source')||'',
        utm_medium: p.get('utm_medium')||'',
        utm_campaign: p.get('utm_campaign')||'',
        utm_term: p.get('utm_term')||'',
        utm_content: p.get('utm_content')||'',
        referrer: document.referrer || '',
        page: location.href,
        ua: navigator.userAgent
      };
      return utm;
    }
    function getParam(name){const p=new URLSearchParams(location.search);return p.get(name)||''}
    const UTM = Object.assign(parseUTM(),{ gclid:getParam('gclid'), yclid:getParam('yclid'), fbclid:getParam('fbclid') });

    // Основная форма — отправка в Bitrix24 (с запасным вебхуком)
    const leadForm = document.getElementById('leadForm');
    if(leadForm){ leadForm.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const d = Object.fromEntries(new FormData(leadForm).entries());

      const payload = {
        fields: {
          TITLE: 'Лид с лендинга Контент Охват',
          NAME: d.name || '',
          PHONE: d.contact ? [{ VALUE: d.contact, VALUE_TYPE: 'WORK' }] : [],
          COMMENTS: `Видео: ${d.video||'-'}\nЖелаемый охват: ${d.reach||'-'}\nКомментарий: ${d.comment||'-'}\nUTM: ${JSON.stringify(UTM)}`,
          SOURCE_ID: 'WEB'
        }
      };

      try{
        if(!BITRIX_WEBHOOK) throw new Error('NO_BITRIX_URL');
        await sendToWebhook(BITRIX_WEBHOOK, payload);
        alert('Спасибо! Заявка отправлена. Мы свяжемся в ближайшее время.');
        leadForm.reset();
        console.log('event: order_submit');
      }catch(err){
        try{
          if(!FALLBACK_WEBHOOK) throw new Error('NO_FALLBACK_URL');
          await sendToWebhook(FALLBACK_WEBHOOK, { lead: payload.fields });
          alert('Спасибо! Заявка принята через резервный канал. Мы свяжемся в ближайшее время.');
          leadForm.reset();
          console.log('event: order_submit');
        }catch(err2){
          alert('Не удалось отправить заявку. Укажите URL вебхука Bitrix24 или резервный вебхук и попробуйте снова.');
        }
      }
    }); }

    // Exit‑intent: frequency cap (1 раз)
    const exitModal = document.getElementById('exitModal');
    const exitClose = document.getElementById('exitClose');
    const exitGoOrder = document.getElementById('exitGoOrder');
    const exitForm = document.getElementById('exitForm');
    let exitShown = false;
    function openExit(){ if(exitShown) return; if(localStorage.getItem('exitIntentShown')==='1') return; exitShown = true; localStorage.setItem('exitIntentShown','1'); exitModal.classList.add('open'); exitModal.setAttribute('aria-hidden','false'); }
    function closeExit(){ exitModal.classList.remove('open'); exitModal.setAttribute('aria-hidden','true'); }
    setTimeout(()=>openExit(), 15000);
    document.addEventListener('mouseout', (e)=>{ if(e.clientY<=0) openExit(); });
    exitClose && exitClose.addEventListener('click', closeExit);
    exitModal && exitModal.addEventListener('click', (e)=>{ if(e.target===exitModal) closeExit(); });
    exitGoOrder && exitGoOrder.addEventListener('click', ()=>{ closeExit(); document.getElementById('order').scrollIntoView({behavior:'smooth'}); });

    if(exitForm){ exitForm.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const d = Object.fromEntries(new FormData(exitForm).entries());
      const payload = {
        fields: {
          TITLE: 'Exit‑intent лид: Контент Охват',
          NAME: '',
          PHONE: d.contact ? [{ VALUE: d.contact, VALUE_TYPE: 'WORK' }] : [],
          COMMENTS: `Видео: ${d.video||'-'}\nКомментарий: ${d.comment||'-'}\n[Exit‑intent]\nUTM: ${JSON.stringify(UTM)}`,
          SOURCE_ID: 'WEB'
        }
      };
      try{
        if(!BITRIX_WEBHOOK) throw new Error('NO_BITRIX_URL');
        await sendToWebhook(BITRIX_WEBHOOK, payload);
        closeExit(); alert('Спасибо! Отправили запрос на расчёт.');
        console.log('event: exit_submit');
      }catch(err){
        try{ if(!FALLBACK_WEBHOOK) throw new Error('NO_FALLBACK_URL');
          await sendToWebhook(FALLBACK_WEBHOOK, { lead: payload.fields });
          closeExit(); alert('Заявка принята через резервный канал.');
          console.log('event: exit_submit');
        }catch(err2){
          alert('Не удалось отправить. Укажите URL вебхука в коде.');
        }
      }
    }); }

    // простые аналитические хуки
    window.addEventListener('click', (e)=>{ if(e.target.closest('#pricing')) console.log('event: pricing_click'); });

    // Self‑tests
    (function runSelfTests(){
      const tests = [];
      function t(name, pass){ tests.push({name, pass}); }
      t('stickyText существует', !!document.getElementById('stickyText'));
      t('miniForm существует', !!document.getElementById('miniForm'));
      t('leadForm существует', !!document.getElementById('leadForm'));
      t('fVideo существует', !!document.getElementById('fVideo'));
      t('fReach существует', !!document.getElementById('fReach'));
      console.group('%cSelf‑tests: Контент Охват','color:#00C853;font-weight:700');
      tests.forEach(x=>console.log((x.pass?'✅':'❌'), x.name));
      console.groupEnd();
    })();
  // reveal on scroll (IntersectionObserver)
    (function(){
      const els=[...document.querySelectorAll('.reveal')];
      if(!('IntersectionObserver'in window)||!els.length) return els.forEach(e=>e.classList.add('in'));
      const io=new IntersectionObserver((entries)=>{entries.forEach(en=>{if(en.isIntersecting){en.target.classList.add('in');io.unobserve(en.target);}})},{threshold:.2});
      els.forEach(e=>io.observe(e));
    })();
  </script>
</body>
</html>
